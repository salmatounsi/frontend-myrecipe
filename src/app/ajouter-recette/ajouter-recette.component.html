<div class="add-recipe-container">

  <div class="container">
    <div class="recipe-card">

      <div class="header">
        <div class="logo">
          <i class="fas fa-utensils"></i>
          <h1>Nouvelle <span>Recette</span></h1>
        </div>
        <h2>Partagez votre création culinaire</h2>
      </div>

      <form #form="ngForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="title"><i class="fas fa-edit"></i> Nom de la recette *</label>
          <input type="text" id="title"
                 [(ngModel)]="recipeForm.title"
                 name="title" required
                 placeholder="Ex: Ratatouille Provençale">
        </div>

        <div class="form-group">
          <label for="description"><i class="fas fa-align-left"></i> Description *</label>
          <textarea id="description"
                    [(ngModel)]="recipeForm.description"
                    name="description" rows="3"
                    placeholder="Décrivez votre recette..."
                    required></textarea>
        </div>

        <div class="form-row">

          <div class="form-group">
            <label for="preparationTime">
              <i class="fas fa-clock"></i> Préparation (min) *
            </label>
            <input type="number"
                   id="preparationTime"
                   [(ngModel)]="recipeForm.preparationTime"
                   name="preparationTime"
                   min="1" required>
          </div>

          <div class="form-group">
            <label for="servings">
              <i class="fas fa-utensils"></i> Personnes *
            </label>
            <input type="number"
                   id="servings"
                   [(ngModel)]="recipeForm.servings"
                   name="servings" min="1"
                   required>
          </div>

        </div>

        <div class="form-group">
          <label for="type">
            <i class="fas fa-tag"></i> Type de recette *
          </label>
          <select id="type"
                  [(ngModel)]="recipeForm.type"
                  name="type">
            <option value="Entrée">Entrée</option>
            <option value="Plat Principal">Plat Principal</option>
            <option value="Dessert">Dessert</option>
            <option value="Boisson">Boisson</option>
            <option value="Snack">Snack</option>
          </select>
        </div>

        <div class="form-section">
          <div class="section-header">
            <h3><i class="fas fa-shopping-basket"></i> Ingrédients *</h3>
          </div>

          <div class="ingredients-list">

            <div class="ingredient-item"
                 *ngFor="let ingredient of recipeForm.ingredients; let i = index">

              <input type="text"
                     [(ngModel)]="recipeForm.ingredients[i]"
                     [name]="'ingredient' + i"
                     placeholder="Ex: 2 tomates">

              <button type="button" class="btn-remove"
                      (click)="removeIngredient(i)"
                      *ngIf="recipeForm.ingredients.length > 1">
                <i class="fas fa-times"></i>
              </button>

            </div>

            <button type="button" class="btn-add-field"
                    (click)="addIngredient()">
              <i class="fas fa-plus"></i> Ajouter un ingrédient
            </button>
          </div>
        </div>

        <div class="form-section">
          <div class="section-header">
            <h3><i class="fas fa-list-ol"></i> Étapes de préparation *</h3>
          </div>

          <div class="steps-list">
            <div class="step-item"
                 *ngFor="let step of recipeForm.steps; let i = index">

              <div class="step-number">{{ i + 1 }}</div>

              <textarea [(ngModel)]="recipeForm.steps[i]"
                        [name]="'step' + i"
                        rows="2"
                        placeholder="Décrivez cette étape..."></textarea>

              <button type="button" class="btn-remove"
                      (click)="removeStep(i)"
                      *ngIf="recipeForm.steps.length > 1">
                <i class="fas fa-times"></i>
              </button>

            </div>

            <button type="button" class="btn-add-field"
                    (click)="addStep()">
              <i class="fas fa-plus"></i> Ajouter une étape
            </button>
          </div>
        </div>

        <div class="form-section">
          <h3><i class="fas fa-image"></i> Photo de la recette</h3>

          <div class="image-preview">
            <img [src]="recipeForm.photoUrl"
                 alt="Aperçu"
                 class="recipe-preview">

            <div class="image-info">
              <p>Modifiez l'URL de la photo ci-dessous :</p>

              <input type="text"
                     [(ngModel)]="recipeForm.photoUrl"
                     name="photoUrl"
                     placeholder="URL de l'image">
            </div>
          </div>
        </div>
        <div class="form-actions">
          <button type="button"
                  class="btn-cancel"
                  (click)="onCancel()">
            <i class="fas fa-times"></i> Annuler
          </button>

          <button type="submit"
                  class="btn-submit"
                  [disabled]="!isFormValid() || isLoading">

            <span *ngIf="!isLoading">
              <i class="fas fa-check"></i> Publier
            </span>

            <span *ngIf="isLoading">
              <i class="fas fa-spinner fa-spin"></i> Envoi...
            </span>
          </button>
        </div>

      </form>

    </div>
  </div>
</div>
